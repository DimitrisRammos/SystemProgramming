Δημήτριος Ραμμος
ΑΜ: 1115201900161

Ο κωδικας μου βρισκεται στο αρχειο program.
Υπαρχει ενα Makefile, 2 αρχεια .cpp  kai input.txt
Επισης υπαρχει και το αρχειο finder.sh για το shell script.

Gia sniffer.cpp & Worker.cpp:


Gia sniffer.cpp:

Το αρχειο sniffer.cpp ειναι ουσιαστικα ο Manager. Για αρχη δημιουργει ενα pipe με το οποιο επικοινωνουν
ο Listener με τον Manager. Επειτα καλειται η fork() και δημιουργειται ο Listener οπου αλλαζουμε την εξοδο του
με το dup2 ωστε να εκτυπωνονται οι αλλαγες sto pipe tou Manager&Listener.
Ο Listener αλλαζει το σωμα του μεσω της execvp me tin inotifywait και αλλες καταλληλες παραμετους.

O Manager συνεχιζει παρακατω μπαινει σε ενα ατερμον loop. Οταν ο Manager διαβασει οτι ο Listener εχει γραψει
καποια πληροφορια τοτε ο Manager διαβαζει απο το pipe tous. Επειτα φτιαχνει ενα pathname και δημιουργει ενα named pipe
το οποιο προκυπτει απο το γραμμα p και καθε φορα ενα διαφορετικο αυξοντα αριθμο.
Για παραδειγμα p1,p2,p3,......

Μετα το O Manager afou δημιουργησει το named pipe με mkfifo τοτε κανει fork().
Αν ειναι το παιδι τοτε το σωμα του μεσω execvp αλλαζει και παιρνει το σωμα του αρχειου Worker.cpp (θα εξηγηθει παρακατω).
Αν ειναι ο πατερας τοτε γραφει το ονομα του αρχειου που διαβασε απο το pipe tou Manager&Listener μεσα στο συγκεκριμενο named
pipe που δημιουργησε για το Manager με τον ΣΥΓΚΕΚΡΙΜΕΝΟ Worker.




Gia Worker.cpp:

O Worker εχει μια main η οποια δεχεται σαν ορισμα το named pipe( το pathname). Το named pipe αυτο ειναι του Manager με το συγκεκριμενο 
Worker.  Ο Worker ανοιγει το named pipe και παιρνει το file descriptor και Επειτα διαβαζει την πληροφορια που γραψε ο Manager για
αυτον εκει.
Αυτη η πληροφορια ειναι το ονομα του αρχειου που πρεπει να διαχειριστει.
Επειτα ο Worker καλει το readfile που διαβαζει το αρχειο και καλει τον parser kαι τελος τα αποτελεσματα γραφονται σε ενα αρχειο 
filename.out που δημιουργει h synaritisi write file.




Gia finder.h:

Ο κωδικας ειναι αρκετα μικρος. Σκοπος ειναι να βρεθουν ποσα lιnk απο αρχεια .out τελειωνουν με μια δοσμενη καταληξη.
πχ για com ->> 6
px gia gr ->>  2
Για καθε αρχειο λοιπον ελεγχουμε για καθε μεταβλητη που δινετε σαν ορισμα κατα την εκτελη απο γραμμη εντολων αν επισυναπτει
με καποια καταληξη λινκ και προσμερτουμε ποσα βρεθηκαν.



Για την εκτελεση:

Αν θελετε να διαγραψετε περιττα αρχει τρεξτε μεσα στο Φακελο program την εξης εντολη:
rm -v !(*.cpp|*.txt|"Makefile"|*.out|*.sh)

Επειτα τρεξτε:
make run
Μετα για να τρεξει το προγραμμα μας σε καποιο αρχειο  .txt μετακινηστε το αντιστοιχο αρχειο στο φακελο με ονομα  "Directory".
Επειτα θα δημιουργηθει στο φακελο program το αντιστοιχο αρχειο με καταληξη .out

Αν τωρα θελετε να τρεξετε το finder.sh τρεξτε στον ιδιο φακελο program:
./finder.sh arguments
οπου arguments = com ή arguments = com gr.....
και θα εκτυπωνονται τα αντιστοιχα αποτελεσματα

